#############################################################################################################################################################################################
##############################################################################   一键到位  ################################################################################################
############################################################################################################################################################################################
Onestep_menu=(
     "一键部署V2ray服务器(含Nginx、X-ui、CFWarp、Tor)" 'Onestep_V2ray'
     "一键部署GPT潘多拉服务器(含Docker、ChatGPT-Pandora)" 'Onestep_GPT'
     )  

#############################################################################################################################################################################################
##############################################################################   一键部署V2ray服务器  ################################################################################################
############################################################################################################################################################################################
function Onestep_V2ray {
    echo -e "${BLUE}即将开始一键部署V2ray服务器${NC}"
    echo
    echo -e "${BLUE}开始安装Nginx...${NC}"
    install_Nginx
    echo
    echo -e "${BLUE}开始安装X-ui...${NC}"
    install_Xui
    echo
    echo -e "${BLUE}即将开始DNS解析设置，请填写\确认参数${NC}"
    set_cfdns
    echo
    echo -e "${BLUE}请将www域名与本机ip绑定，绑定完成后返回继续${NC}"
    wait && echo "正在启动DNS管理器，请稍候..."
    echo 
    cfdns
    echo
    echo -e "${BLUE}即将开始申请SSL证书,申请完成后可继续选择安装BBR加速，并返回继续${NC}"
    echo 
    x-ui 
    echo
    echo -e "${BLUE}即将开始配置Tor，请填写\确认参数${NC}"
    set_tor_config
    echo
    echo -e "${BLUE}开始安装Tor...${NC}"
    install_Tor 
}


#请到 /etc/nginx/conf.d 目录中修改Nginx配置
#请完成ssl签名

#############################################################################################################################################################################################
##############################################################################   一键部署GPT潘多拉服务器  ################################################################################################
############################################################################################################################################################################################
function Onestep_GPT {
    echo -e "${BLUE}即将开始一键部署GPT潘多拉服务器${NC}"
    echo -e "${BLUE}开始安装Docker...${NC}"
    install_Docker
    confirm "是否删除当前所有Docker容器？" "已取消删除容器" || ( docker stop $(docker ps -a -q) &&  docker rm $(docker ps -a -q) && echo "已删除所有容器" )
    echo -e "${BLUE}开始下载/更新镜像文件..${NC}"
    pull_Pandora
    echo -e "${BLUE}即将开始配置设置，请填写\确认参数${NC}"
    set_Pandora
    echo -e "${BLUE}准备启动GPT潘多拉服务器${NC}"
    run_Pandora && echo -e "${BLUE}已成功启动GPT潘多拉服务器！${NC}"
}
